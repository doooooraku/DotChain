
# 1.5_UI_画面設計書.md（DotChain 最終決定版）

## 0. このドキュメントについて

### 0.1 目的

このドキュメントは、アプリ **「DotChain（ドットチェーン）」** の「見た目（Visual）」と「動き（Motion）」の全てを定義した設計図です。

- **0_プロダクト戦略**: コンセプト（「快感」「ミニマル」）の定義
- **1.5_UI_画面設計書（これ）**: 実際に画面に何を配置し、どう光り、どう震えるかの定義

開発者（あなた）は、**迷ったらこのファイルのデザインルールに従う**ことで、世界品質のアプリを作ることができます。

### 0.2 用語解説（初心者向け）

- **UI（ユーアイ）**: User Interface。画面の見た目、ボタン、文字など「ユーザーの目に映るすべて」のこと。
- **UX（ユーエックス）**: User Experience。「気持ちいい」「分かりやすい」といった体験のこと。今回は「UIでUXを作る」のが目標。
- **ワイヤーフレーム**: 色をつける前の「設計図」。家の間取り図のようなもの。
- **Haptics（ハプティクス）**: スマホの振動機能。このアプリの生命線。
- **RTL (Right to Left)**: アラビア語などの「右から左に読む」言語対応のこと。通常とは左右逆のレイアウトになります。
- **FAB (Floating Action Button)**: 画面の右下などに浮いている丸い追加ボタンのこと。
- **Modal (モーダル)**: 画面の上に重なって出てくる一時的な画面。

---

## 1. 全体方針（デザイン・ガイドライン）

### 1.1 デザインコンセプト

**「Cyber Zen（サイバー・ゼン）」**
静寂な黒の世界に、行動した瞬間だけネオンの光が走る。

- **ベースカラー**: `#000000` (完全な黒。有機ELで美しく映える)
- **メインカラー**: `#39FF14` (ネオングリーン。完了の合図)
- **アクセント**: `#FF00FF` (ネオンピンク。強調やエラー)
- **テキスト色**: `#FFFFFF` (白) または `#888888` (グレー。補足情報)

### 1.2 UIの3つの鉄則

1.  **親指ファースト (Thumb-First)**
    - メインのアクション（記録ボタン）は、画面の下半分に配置する。片手操作ですべて完結させる。
2.  **文字より「色と形」 (Visual over Text)**
    - 読まなくても分かるようにする。
    - 「完了しました」という文字はいらない。ボタンが緑に光れば分かる。
3.  **即座の反応 (Instant Feedback)**
    - タップしてから **0.1秒以内** に「音・光・振動」を返す。

### 1.4 アクセシビリティと陰影ルール（DotChain固有）
- **アクセシビリティ**
  - 主要な押下要素（習慣ボタンなど）には `accessibilityRole="button"` と `accessibilityState={{ checked: active }}` を付与し、スクリーンリーダーで「ボタン／達成済みか」を読み上げられるようにする。
  - `accessibilityLabel` は「◯◯の習慣ボタン」のように文脈が伝わる文言を指定する。
- **影（シャドウ）表現**
  - iOS: `shadowColor / shadowOpacity / shadowRadius / shadowOffset` を設定し、ネオン色の光り方を強調する。
  - Android: `elevation` を併用し、立体感を出す（iOS では無視されるためクロスプラットフォームで共存可能）。
  - 影・光の色はテーマのアクセント色（neonGreen / neonPink / cyberBlue）に追従させ、背景とコントラストを確保する。

### 1.3 多言語・RTL対応ルール

- **レイアウト反転**:
  - アラビア語などの RTL 言語設定時は、基本的に配置を左右反転させる。
  - 例：設定アイコン（通常右上）→ RTLでは左上。
  - **例外**: ヒートマップ（時系列）は**常に「左→右（過去→未来）」**のままにする（世界標準のカレンダー形式に合わせる）。
- **アイコンと文字の分離**:
  - 言語によって文字数が大きく変わるため、ボタンの中に文字を入れない。ラベルはボタンの上に配置する。

---

## 2. 画面一覧と遷移図

シンプルさを極めるため、画面数は最小限にします。

| 画面ID | 画面名 | 役割 | 備考 |
| :--- | :--- | :--- | :--- |
| **S-01** | **ホーム (Main)** | 習慣の記録・閲覧（メイン画面） | アプリ起動時ここ |
| **S-02** | **設定 (Settings)** | 言語・音・振動・ライセンス確認 | モーダル表示 |
| **S-03** | **編集 (Edit)** | 習慣の追加・修正・削除 | モーダル表示 |
| **S-04** | **課金 (Pro)** | 有料プランへの誘導 | 派手な演出あり |
| **S-05** | **オンボーディング** | 初回起動時のガイド | オーバーレイ表示 |
| **W-01** | **ウィジェット** | ホーム画面用の小窓 | アプリ外機能 |

### 遷移イメージ（テキスト版）

- `S-05 オンボーディング` (初回のみ)
  - 画面タップ → `S-01 ホーム`
- `S-01 ホーム`
  - 習慣ボタンタップ → (画面遷移なしで完了演出)
  - 習慣ボタン長押し → (取消演出)
  - 「＋」ボタンタップ → `S-03 編集` (新規)
  - 習慣名をタップ → `S-03 編集` (修正)
  - 歯車アイコン → `S-02 設定`
  - 王冠アイコン → `S-04 課金`
- `S-02 設定`
  - 「Proプランを見る」 → `S-04 課金`
  - 「ライセンス」 → ライセンス一覧表示

---

## 3. 画面詳細スペック

### 3.1 S-01 ホーム画面（メイン）

このアプリの99%の時間を過ごす画面です。

#### 3.1.1 レイアウト (ワイヤーフレーム)

```text
+--------------------------------------------------+
|  11:00                                           |
| [ 👑 ] (Pro)                      [ ⚙️ ] (設定) | <-- ヘッダー
|                                                  |
|   DAYS STREAK (連続達成日数)                     |
|   🔥 12                                          |
|                                                  |
|   YOUR CHAIN (ヒートマップ)                      |
|   (左端) ▫️▫️▪️▪️▫️▪️▪️▪️ (右端:今日)            | <-- 横スクロール
|                                                  |
| ------------------------------------------------ |
|                                                  |
|   [ ラベル: Drink Water ]                        |
|   +------------------------------------------+   |
|   |                                          |   |
|   |         ( 巨 大 ボ タ ン )               |   | <--- C-01 ビッグボタン
|   |                                          |   |
|   +------------------------------------------+   |
|                                                  |
|   [ ラベル: Read Book ]                          |
|   +----------------------+  +-----------------+  |
|   |    ( 中 ボ タ ン )   |  | ( 中 ボ タ ン ) |  |
|   +----------------------+  +-----------------+  |
|                                                  |
|                          ( + ) <--- FAB (追加)   |
|                                                  |
+--------------------------------------------------+
````

#### 3.1.2 主要コンポーネント: C-01 ビッグボタン

このボタンの挙動がアプリの品質を決めます。

  * **形状**: 横長の角丸長方形 (BorderRadius: 24px)
  * **状態パターン**:
    1.  **未完了 (Idle)**:
          * 枠線: ダークグレー (`#333333`) 2px
          * 背景: 黒 (`#000000`)
          * アイコン: 白 (`#FFFFFF`) 中央配置
    2.  **押下中 (Pressing)**:
          * アニメーション: サイズが `0.96倍` に縮む (バネのような動き)
    3.  **完了 (Active/Done)**:
          * 枠線: なし
          * 背景: **ネオングリーン (`#39FF14`)**
          * アイコン: 黒 (`#000000`)
          * **パーティクル**: ボタンの背後から光の粒が放射状に飛び散る
  * **触覚 (Haptics)**:
      * 押した瞬間: `ImpactFeedbackStyle.Heavy` (ドンッ！という重い衝撃)

#### 3.1.3 アラビア語 (RTL) 対応

  * ヘッダーの「王冠」と「歯車」の位置を入れ替える。
  * 習慣名のラベル配置を「右寄せ」にする。
  * FAB（追加ボタン）の位置を「左下」にする。

-----

### 3.2 S-02 設定画面 (モーダル)

#### 3.2.1 役割

シンプルにスイッチを並べるだけ。下からせり上がるシート形式。

#### 3.2.2 項目一覧

  * **Language (言語)**: タップで19言語の選択ピッカーを表示。即時反映。
  * **Sound (効果音)**: ON / OFF スイッチ。
  * **Haptics (振動)**: ON / OFF スイッチ。
  * **Theme (テーマ)**:
      * Free: 「Dark」固定 (ロックアイコン付き)
      * Pro: 「Neon Pink」「Cyber Blue」などを選択可能。
  * **Restore Purchase**: 課金の復元ボタン (テキストリンク)。
  * **Open Source Licenses**: 使用しているOSSのライセンス一覧へのリンク。
  * **App Version**: `v1.0.0` (小さく表示)

-----

### 3.3 S-03 編集画面 (モーダル)

#### 3.3.1 役割

新しい習慣を作ったり、名前を変えたりする。

#### 3.3.2 UI構成

  * **Icon Picker**: 代表的な絵文字 (🔥, 💧, 📚, 🏃, 🧘, 💤 など) をグリッド表示。
  * **Name Input**: テキスト入力欄。
      * *プレースホルダー*: "Name your habit..."
      * *入力ルール*: 最大20文字。
  * **Delete Button**: 既存の習慣の場合、一番下に赤字で「Delete Habit」を表示。
      * タップすると確認ダイアログなしで削除（誤操作なら再度作ればいいという思想）。

-----

### 3.4 S-04 課金 (Paywall) 画面

#### 3.4.1 役割

「お金を払いたい」と思わせる最高にカッコいい画面。

#### 3.4.2 レイアウト

  * **背景**: 全体がうっすらと虹色にオーロラのようなアニメーション。
  * **キャッチコピー**: **"Unlock Your Potential."** (あなたの可能性を解放せよ)
  * **Visual**: ロックが外れてチェーンが輝くアニメーション画像。
  * **比較表 (Benefits)**:
      * ✅ Unlimited Habits (無制限)
      * ✅ All Color Themes (全色)
      * ✅ Custom App Icons (アプリアイコン変更)
  * **購入ボタン (Action)**:
      * **Primary**: 「Yearly $14.99 (Best Value)」 \<--- **大きく、点滅するアニメーション**
      * **Secondary**: 「Monthly $1.99」 \<--- 小さく、地味に表示

-----

### 3.5 S-05 オンボーディング (初回のみ)

#### 3.5.1 役割

言葉で説明せず、操作を促す。

#### 3.5.2 レイアウト

  * 画面全体を半透明の黒 (`rgba(0,0,0,0.8)`) で覆う。
  * **「＋」ボタンの部分だけ** 透明にくり抜く（スポットライト効果）。
  * **指差しアニメーション**の手のアイコンを表示。
  * テキスト: 「Tap to start」のみ。

-----

### 3.6 W-01 ウィジェット

#### 3.6.1 小サイズ (Small / 1x1)

  * **見た目**: アプリアイコンに似ているが、中央がその日のメイン習慣のアイコンになっている。
  * **状態**:
      * 未完了: 黒背景、グレーアイコン。
      * 完了: ネオン背景、黒アイコン。
  * **機能**: タップするとアプリが起動し、自動的に記録完了アニメーションが走る。

#### 3.6.2 中サイズ (Medium / 2x1)

  * **見た目**:
      * 左半分: 今日のメイン習慣ボタン。
      * 右半分: 直近7日間のヒートマップ（ドット表示）。

-----

## 4\. モーション & インタラクション仕様

「気持ちよさ」を作るための物理法則の定義です。

### 4.1 "Pop" アニメーション (ボタン押下)

  * **技術メモ**: Tamagui の `AnimatePresence` や `moti` を使用。
  * **シーケンス**:
    1.  **PressIn**: `scale: 0.96` (沈む)
    2.  **PressOut**: `scale: 1.05` (跳ねる) + 色変更 + 振動
    3.  **Settle**: `scale: 1.0` (戻る)

### 4.2 パーティクルエフェクト (紙吹雪)

  * 習慣を完了した瞬間、ボタンの中心から外側へ 12〜16個の小さなドット (`4px`) が飛び散る。
  * **物理挙動**: 少し重力をかけ、放物線を描いて消える。
  * **色**: ボタンのテーマカラーと同じ色。

### 4.3 Undo (長押し取消)

  * 完了状態のボタンを長押し (500ms)。
  * ボタンの周囲を「白いリング」が一周するアニメーションを表示。
  * リングが一周したら、振動 (`Medium`) と共に未完了に戻る。

-----

## 5\. エラーとエンプティステート

### 5.1 エンプティ (習慣が0個のとき)

  * 真っ黒な画面だと壊れているように見える。
  * 画面中央に薄いグレーで「👆 Tap '+' to start」と表示し、追加ボタン（FAB）を呼吸するようにゆっくり点滅させる。

### 5.2 オフライン時の課金エラー

  * 課金ボタンを押した瞬間にネットがない場合。
  * 画面上部に **ネオンピンクのスナックバー** をスライドインさせる。
      * 「No Internet connection.」
      * 3秒後に自動で消える。

-----

## 6\. リソース命名規則

開発時にファイル名で迷わないためのルール。

  * **画像**: `assets/images/`
      * `paywall_bg.png`
      * `onboarding_hand.png`
  * **アイコン**: `assets/icons/` (アプリアイコン用)
      * `icon_default.png`
      * `icon_neon.png` (Pro用)
      * `icon_gold.png` (Pro用)
  * **効果音**: `assets/sounds/`
      * `pop_success.mp3` (完了音)
      * `pop_tap.mp3` (押し込み音)
      * `undo.mp3` (取り消し音)

-----

## 7\. 実装者へのメモ（工場長より）

  * **Tamaguiの設定**: `tamagui.config.ts` で、カラーパレット（Neon Green, Black）を定義してください。ハードコーディング（直接色指定）は禁止です。
  * **ダークモード**: このアプリは「ダークモード」がデフォルト（標準）です。ライトモードを作る必要はありません。常に黒背景です。
  * **実機テスト**: シミュレーターでは振動しません。必ずiPhone/Android実機で「コンッ」という感触を確認してください。

-----

```
```
