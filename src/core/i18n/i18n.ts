import { I18nManager } from 'react-native';
import { create } from 'zustand';

// 英語ベースのキーセット（文言の元）
const baseEn = {
  daysStreak: 'DAYS STREAK',
  yourChain: 'YOUR CHAIN',
  settings: 'Settings',
  hapticOff: 'Haptics off',
  language: 'Language',
  sound: 'Sound',
  haptics: 'Haptics',
  theme: 'Theme',
  restore: 'Restore Purchase',
  version: 'App Version',
  rtl: 'Right-to-left layout',
  tapSound: 'Tap sound',
  click: 'Click',
  pop: 'Pop',
  freeThemeNote: 'Free: Dark only / Pro unlocks Neon Pink, Cyber Blue',
  proThemeNote: 'Pro themes unlock after paywall implementation.',
  restoreDesc: 'Restore Purchase (later)',
  licenses: 'Open Source Licenses (later)',
  openPro: 'Open DotChain Pro',
  heroPaywall: 'Upgrade to neon world',
  priceMonthly: '$2.99 / month',
  onboardingTitle: 'Welcome to DotChain',
  onboardingBody: 'One tap, heavy haptics. Let’s build today’s chain.',
  start: 'Get started',
  paywallNote: 'Billing/Ads will be added later.',
};

// 正式訳（19言語）
const dictionaries = {
  en: baseEn,
  ja: {
    ...baseEn,
    daysStreak: '連続日数',
    yourChain: 'チェーン',
    settings: '設定',
    hapticOff: '振動オフ',
    language: '言語',
    sound: 'サウンド',
    haptics: '振動',
    theme: 'テーマ',
    restore: '購入を復元',
    version: 'アプリバージョン',
    rtl: '右から左のレイアウト',
    tapSound: 'タップ音',
    click: 'クリック',
    pop: 'ポップ',
    freeThemeNote: '無料: ダークのみ / Proでネオンピンク・サイバーブルー解放',
    proThemeNote: 'Proテーマは課金実装後に解放されます。',
    restoreDesc: '購入を復元（後で実装）',
    licenses: 'OSSライセンス（後で表示）',
    openPro: 'DotChain Pro を開く',
    heroPaywall: 'ネオンの世界へアップグレード',
    priceMonthly: '$2.99 / 月',
    onboardingTitle: 'ようこそ DotChain へ',
    onboardingBody: '1タップでドンッと振動。今日のチェーンをつなげよう。',
    start: 'はじめる',
    paywallNote: '課金と広告は後から追加されます。',
  },
  fr: {
    ...baseEn,
    daysStreak: 'JOURS DE SUITE',
    yourChain: 'TA CHAÎNE',
    settings: 'Réglages',
    hapticOff: 'Vibrations désactivées',
    language: 'Langue',
    sound: 'Son',
    haptics: 'Vibrations',
    theme: 'Thème',
    restore: 'Restaurer les achats',
    version: "Version de l’app",
    rtl: 'Disposition droite‑à‑gauche',
    tapSound: 'Son du tap',
    click: 'Clic',
    pop: 'Pop',
    freeThemeNote: 'Gratuit : Dark uniquement / Pro déverrouille Neon Pink et Cyber Blue',
    proThemeNote: 'Les thèmes Pro seront activés après le paywall.',
    restoreDesc: 'Restaurer les achats (plus tard)',
    licenses: 'Licences open source (plus tard)',
    openPro: 'Ouvrir DotChain Pro',
    heroPaywall: 'Passe en mode néon',
    priceMonthly: '2,99 $ / mois',
    onboardingTitle: 'Bienvenue sur DotChain',
    onboardingBody: 'Un tap, grosse vibration. Construisons la chaîne du jour.',
    start: 'Commencer',
    paywallNote: 'Facturation/annonces ajoutées plus tard.',
  },
  es: {
    ...baseEn,
    daysStreak: 'DÍAS SEGUIDOS',
    yourChain: 'TU CADENA',
    settings: 'Ajustes',
    hapticOff: 'Vibración desactivada',
    language: 'Idioma',
    sound: 'Sonido',
    haptics: 'Vibración',
    theme: 'Tema',
    restore: 'Restaurar compras',
    version: 'Versión de la app',
    rtl: 'Diseño derecha a izquierda',
    tapSound: 'Sonido de toque',
    click: 'Clic',
    pop: 'Pop',
    freeThemeNote: 'Gratis: solo Dark / Pro desbloquea Neon Pink y Cyber Blue',
    proThemeNote: 'Los temas Pro se activarán tras el paywall.',
    restoreDesc: 'Restaurar compras (más adelante)',
    licenses: 'Licencias OSS (más adelante)',
    openPro: 'Abrir DotChain Pro',
    heroPaywall: 'Actualiza al mundo neón',
    priceMonthly: '$2.99 / mes',
    onboardingTitle: 'Bienvenido a DotChain',
    onboardingBody: 'Un toque, vibración fuerte. Construyamos la cadena de hoy.',
    start: 'Empezar',
    paywallNote: 'Facturación/Anuncios se añadirán después.',
  },
  de: {
    ...baseEn,
    daysStreak: 'TAGE IN FOLGE',
    yourChain: 'DEINE KETTE',
    settings: 'Einstellungen',
    hapticOff: 'Vibration aus',
    language: 'Sprache',
    sound: 'Sound',
    haptics: 'Vibration',
    theme: 'Theme',
    restore: 'Käufe wiederherstellen',
    version: 'App-Version',
    rtl: 'Rechts-nach-links-Layout',
    tapSound: 'Tippsound',
    click: 'Klick',
    pop: 'Plopp',
    freeThemeNote: 'Gratis: nur Dark / Pro schaltet Neon Pink & Cyber Blue frei',
    proThemeNote: 'Pro-Themes nach Paywall verfügbar.',
    restoreDesc: 'Wiederherstellen (später)',
    licenses: 'OSS-Lizenzen (später)',
    openPro: 'DotChain Pro öffnen',
    heroPaywall: 'Upgrade in die Neon-Welt',
    priceMonthly: '2,99 $ / Monat',
    onboardingTitle: 'Willkommen bei DotChain',
    onboardingBody: 'Ein Tap, starke Vibration. Lass uns die heutige Kette bauen.',
    start: 'Loslegen',
    paywallNote: 'Abrechnung/Ads kommen später.',
  },
  it: {
    ...baseEn,
    daysStreak: 'GIORNI DI FILA',
    yourChain: 'LA TUA CATENA',
    settings: 'Impostazioni',
    hapticOff: 'Vibrazione disattivata',
    language: 'Lingua',
    sound: 'Suono',
    haptics: 'Vibrazione',
    theme: 'Tema',
    restore: 'Ripristina acquisti',
    version: "Versione dell'app",
    rtl: 'Layout da destra a sinistra',
    tapSound: 'Suono tocco',
    click: 'Click',
    pop: 'Pop',
    freeThemeNote: 'Gratis: solo Dark / Pro sblocca Neon Pink, Cyber Blue',
    proThemeNote: 'Temi Pro attivi dopo il paywall.',
    restoreDesc: 'Ripristino (a breve)',
    licenses: 'Licenze OSS (a breve)',
    openPro: 'Apri DotChain Pro',
    heroPaywall: 'Passa al mondo neon',
    priceMonthly: '$2.99 / mese',
    onboardingTitle: 'Benvenuto su DotChain',
    onboardingBody: 'Un tap, vibrazione forte. Costruiamo la catena di oggi.',
    start: 'Inizia',
    paywallNote: 'Fatturazione/Ads più tardi.',
  },
  pt: {
    ...baseEn,
    daysStreak: 'DIAS SEGUIDOS',
    yourChain: 'SUA CORRENTE',
    settings: 'Configurações',
    hapticOff: 'Vibração desligada',
    language: 'Idioma',
    sound: 'Som',
    haptics: 'Vibração',
    theme: 'Tema',
    restore: 'Restaurar compras',
    version: 'Versão do app',
    rtl: 'Layout da direita para a esquerda',
    tapSound: 'Som do toque',
    click: 'Clique',
    pop: 'Pop',
    freeThemeNote: 'Grátis: só Dark / Pro libera Neon Pink e Cyber Blue',
    proThemeNote: 'Temas Pro após o paywall.',
    restoreDesc: 'Restaurar (em breve)',
    licenses: 'Licenças OSS (em breve)',
    openPro: 'Abrir DotChain Pro',
    heroPaywall: 'Atualize para o mundo neon',
    priceMonthly: 'US$2.99 / mês',
    onboardingTitle: 'Bem-vindo ao DotChain',
    onboardingBody: 'Um toque, vibração forte. Vamos construir a cadeia de hoje.',
    start: 'Começar',
    paywallNote: 'Cobrança/Ads serão adicionadas depois.',
  },
  ru: {
    ...baseEn,
    daysStreak: 'СЕРИЯ ДНЕЙ',
    yourChain: 'ТВОЯ ЦЕПЬ',
    settings: 'Настройки',
    hapticOff: 'Вибрация выключена',
    language: 'Язык',
    sound: 'Звук',
    haptics: 'Вибрация',
    theme: 'Тема',
    restore: 'Восстановить покупки',
    version: 'Версия приложения',
    rtl: 'Макет справа налево',
    tapSound: 'Звук нажатия',
    click: 'Клик',
    pop: 'Поп',
    freeThemeNote: 'Бесплатно: только Dark / Pro открывает Neon Pink, Cyber Blue',
    proThemeNote: 'Темы Pro будут доступны после paywall.',
    restoreDesc: 'Восстановление (скоро)',
    licenses: 'Лицензии OSS (скоро)',
    openPro: 'Открыть DotChain Pro',
    heroPaywall: 'В неоновый мир',
    priceMonthly: '$2.99 / месяц',
    onboardingTitle: 'Добро пожаловать в DotChain',
    onboardingBody: 'Одно нажатие — мощная вибрация. Соберём цепочку сегодня.',
    start: 'Начать',
    paywallNote: 'Биллинг/реклама позже.',
  },
  zh: {
    ...baseEn,
    daysStreak: '连续天数',
    yourChain: '你的链条',
    settings: '设置',
    hapticOff: '振动已关',
    language: '语言',
    sound: '声音',
    haptics: '振动',
    theme: '主题',
    restore: '恢复购买',
    version: '应用版本',
    rtl: '从右到左布局',
    tapSound: '点击声音',
    click: '点击',
    pop: '砰',
    freeThemeNote: '免费：仅暗色 / 专业版解锁霓虹粉和赛博蓝',
    proThemeNote: '专业主题将在付费后解锁。',
    restoreDesc: '恢复购买（稍后）',
    licenses: '开源许可（稍后）',
    openPro: '打开 DotChain Pro',
    heroPaywall: '升级到霓虹世界',
    priceMonthly: '$2.99 / 月',
    onboardingTitle: '欢迎使用 DotChain',
    onboardingBody: '一触即振，构建今天的链条。',
    start: '开始',
    paywallNote: '计费/广告稍后添加。',
  },
  ko: {
    ...baseEn,
    daysStreak: '연속 일수',
    yourChain: '당신의 체인',
    settings: '설정',
    hapticOff: '진동 꺼짐',
    language: '언어',
    sound: '사운드',
    haptics: '진동',
    theme: '테마',
    restore: '구매 복원',
    version: '앱 버전',
    rtl: 'RTL 레이아웃',
    tapSound: '탭 사운드',
    click: '클릭',
    pop: '팝',
    freeThemeNote: '무료: 다크만 / Pro는 네온핑크·사이버블루 해제',
    proThemeNote: 'Pro 테마는 페이월 후 활성화.',
    restoreDesc: '구매 복원(추후)',
    licenses: 'OSS 라이선스(추후)',
    openPro: 'DotChain Pro 열기',
    heroPaywall: '네온 세계로 업그레이드',
    priceMonthly: '$2.99 / 월',
    onboardingTitle: 'DotChain에 오신 것을 환영합니다',
    onboardingBody: '한 번 탭, 강한 진동. 오늘의 체인을 쌓아요.',
    start: '시작하기',
    paywallNote: '결제/광고는 나중에 추가.',
  },
  ar: {
    ...baseEn,
    daysStreak: 'سلسلة الأيام',
    yourChain: 'سلسلتك',
    settings: 'الإعدادات',
    hapticOff: 'الاهتزاز متوقف',
    language: 'اللغة',
    sound: 'الصوت',
    haptics: 'اهتزاز',
    theme: 'السمة',
    restore: 'استعادة المشتريات',
    version: 'إصدار التطبيق',
    rtl: 'اتجاه من اليمين لليسار',
    tapSound: 'صوت اللمس',
    click: 'نقرة',
    pop: 'بوب',
    freeThemeNote: 'مجاني: داكن فقط / برو يفتح النيون الوردي والأزرق السيبراني',
    proThemeNote: 'ثيمات برو بعد حاجز الدفع.',
    restoreDesc: 'استعادة (لاحقاً)',
    licenses: 'تراخيص مفتوحة المصدر (لاحقاً)',
    openPro: 'افتح DotChain Pro',
    heroPaywall: 'ترقية لعالم النيون',
    priceMonthly: '$2.99 / شهر',
    onboardingTitle: 'أهلاً بك في DotChain',
    onboardingBody: 'لمسة واحدة، اهتزاز قوي. لنصنع سلسلة اليوم.',
    start: 'ابدأ',
    paywallNote: 'الدفع/الإعلانات لاحقاً.',
  },
  hi: {
    ...baseEn,
    daysStreak: 'लगातार दिन',
    yourChain: 'आपकी चेन',
    settings: 'सेटिंग्स',
    hapticOff: 'वाइब्रेशन बंद',
    language: 'भाषा',
    sound: 'साउंड',
    haptics: 'वाइब्रेशन',
    theme: 'थीम',
    restore: 'खरीद पुनर्स्थापित करें',
    version: 'ऐप संस्करण',
    rtl: 'दाएँ-से-बाएँ लेआउट',
    tapSound: 'टैप साउंड',
    click: 'क्लिक',
    pop: 'पॉप',
    freeThemeNote: 'फ्री: केवल डार्क / प्रो से नीऑन पिंक, साइबर ब्लू खुलते हैं',
    proThemeNote: 'प्रो थीम पेवॉल के बाद सक्रिय होंगे।',
    restoreDesc: 'पुनर्स्थापन (जल्द)',
    licenses: 'ओएसएस लाइसेंस (जल्द)',
    openPro: 'DotChain Pro खोलें',
    heroPaywall: 'नीऑन दुनिया में अपग्रेड करें',
    priceMonthly: '$2.99 / माह',
    onboardingTitle: 'DotChain में स्वागत है',
    onboardingBody: 'एक टैप, तेज वाइब्रेशन। आज की चेन बनाएं।',
    start: 'शुरू करें',
    paywallNote: 'बिलिंग/ऐड बाद में।',
  },
  id: {
    ...baseEn,
    daysStreak: 'HARI BERUNTUN',
    yourChain: 'RANTAI KAMU',
    settings: 'Pengaturan',
    hapticOff: 'Getar mati',
    language: 'Bahasa',
    sound: 'Suara',
    haptics: 'Getaran',
    theme: 'Tema',
    restore: 'Pulihkan pembelian',
    version: 'Versi aplikasi',
    rtl: 'Tata letak RTL',
    tapSound: 'Suara tap',
    click: 'Klik',
    pop: 'Pop',
    freeThemeNote: 'Gratis: hanya Dark / Pro membuka Neon Pink & Cyber Blue',
    proThemeNote: 'Tema Pro aktif setelah paywall.',
    restoreDesc: 'Pulihkan (segera)',
    licenses: 'Lisensi OSS (segera)',
    openPro: 'Buka DotChain Pro',
    heroPaywall: 'Upgrade ke dunia neon',
    priceMonthly: '$2.99 / bulan',
    onboardingTitle: 'Selamat datang di DotChain',
    onboardingBody: 'Sekali tap, getaran kuat. Bangun rantai hari ini.',
    start: 'Mulai',
    paywallNote: 'Billing/iklan menyusul.',
  },
  th: {
    ...baseEn,
    daysStreak: 'จำนวนวันต่อเนื่อง',
    yourChain: 'โซ่ของคุณ',
    settings: 'การตั้งค่า',
    hapticOff: 'ปิดการสั่น',
    language: 'ภาษา',
    sound: 'เสียง',
    haptics: 'การสั่น',
    theme: 'ธีม',
    restore: 'กู้คืนการซื้อ',
    version: 'เวอร์ชันแอป',
    rtl: 'เลย์เอาต์ขวาไปซ้าย',
    tapSound: 'เสียงแตะ',
    click: 'คลิก',
    pop: 'ป็อป',
    freeThemeNote: 'ฟรี: ธีมมืดเท่านั้น / Pro ปลดล็อก Neon Pink, Cyber Blue',
    proThemeNote: 'ธีม Pro จะใช้หลังเพย์วอลล์',
    restoreDesc: 'กู้คืน (เร็ว ๆ นี้)',
    licenses: 'สัญญาอนุญาต OSS (เร็ว ๆ นี้)',
    openPro: 'เปิด DotChain Pro',
    heroPaywall: 'อัปเกรดสู่โลกนีออน',
    priceMonthly: '$2.99 / เดือน',
    onboardingTitle: 'ยินดีต้อนรับสู่ DotChain',
    onboardingBody: 'แตะครั้งเดียว สั่นแรง สร้างโซ่ของวันนี้',
    start: 'เริ่ม',
    paywallNote: 'การชำระเงิน/โฆษณาจะเพิ่มภายหลัง',
  },
  vi: {
    ...baseEn,
    daysStreak: 'SỐ NGÀY LIÊN TIẾP',
    yourChain: 'CHUỖI CỦA BẠN',
    settings: 'Cài đặt',
    hapticOff: 'Rung tắt',
    language: 'Ngôn ngữ',
    sound: 'Âm thanh',
    haptics: 'Rung',
    theme: 'Chủ đề',
    restore: 'Khôi phục mua hàng',
    version: 'Phiên bản ứng dụng',
    rtl: 'Bố cục RTL',
    tapSound: 'Âm chạm',
    click: 'Click',
    pop: 'Pop',
    freeThemeNote: 'Miễn phí: chỉ Dark / Pro mở Neon Pink & Cyber Blue',
    proThemeNote: 'Chủ đề Pro sau paywall.',
    restoreDesc: 'Khôi phục (sắp tới)',
    licenses: 'Giấy phép OSS (sắp tới)',
    openPro: 'Mở DotChain Pro',
    heroPaywall: 'Nâng cấp vào thế giới neon',
    priceMonthly: '$2.99 / tháng',
    onboardingTitle: 'Chào mừng đến DotChain',
    onboardingBody: 'Một chạm, rung mạnh. Xây chuỗi hôm nay.',
    start: 'Bắt đầu',
    paywallNote: 'Thanh toán/quảng cáo sẽ thêm sau.',
  },
  ms: {
    ...baseEn,
    daysStreak: 'HARI BERTURUT',
    yourChain: 'RANTAI ANDA',
    settings: 'Tetapan',
    hapticOff: 'Getaran dimatikan',
    language: 'Bahasa',
    sound: 'Bunyi',
    haptics: 'Getaran',
    theme: 'Tema',
    restore: 'Pulihkan pembelian',
    version: 'Versi aplikasi',
    rtl: 'Susun atur kanan-ke-kiri',
    tapSound: 'Bunyi ketukan',
    click: 'Klik',
    pop: 'Pop',
    freeThemeNote: 'Percuma: Dark sahaja / Pro buka Neon Pink & Cyber Blue',
    proThemeNote: 'Tema Pro selepas paywall.',
    restoreDesc: 'Pulih (akan datang)',
    licenses: 'Lesen OSS (akan datang)',
    openPro: 'Buka DotChain Pro',
    heroPaywall: 'Tingkatkan ke dunia neon',
    priceMonthly: '$2.99 / bulan',
    onboardingTitle: 'Selamat datang ke DotChain',
    onboardingBody: 'Satu ketukan, getaran kuat. Bina rantai hari ini.',
    start: 'Mula',
    paywallNote: 'Pengebilan/iklan kemudian.',
  },
  tr: {
    ...baseEn,
    daysStreak: 'GÜN SERİSİ',
    yourChain: 'ZİNCİRİN',
    settings: 'Ayarlar',
    hapticOff: 'Titreşim kapalı',
    language: 'Dil',
    sound: 'Ses',
    haptics: 'Titreşim',
    theme: 'Tema',
    restore: 'Satın alımı geri yükle',
    version: 'Uygulama sürümü',
    rtl: 'Sağdan sola düzen',
    tapSound: 'Dokunma sesi',
    click: 'Tık',
    pop: 'Pop',
    freeThemeNote: 'Ücretsiz: yalnızca Dark / Pro Neon Pink, Cyber Blue açar',
    proThemeNote: 'Pro temalar paywall sonrası.',
    restoreDesc: 'Geri yükleme (yakında)',
    licenses: 'OSS lisansları (yakında)',
    openPro: "DotChain Pro'yu aç",
    heroPaywall: 'Neon dünyasına geç',
    priceMonthly: '$2.99 / ay',
    onboardingTitle: "DotChain'e hoş geldin",
    onboardingBody: 'Tek dokunuş, güçlü titreşim. Bugünün zincirini kur.',
    start: 'Başla',
    paywallNote: 'Faturalama/reklam sonra.',
  },
  nl: {
    ...baseEn,
    daysStreak: 'DAGEN OP RIJ',
    yourChain: 'JOUW KETEN',
    settings: 'Instellingen',
    hapticOff: 'Trillen uit',
    language: 'Taal',
    sound: 'Geluid',
    haptics: 'Trillen',
    theme: 'Thema',
    restore: 'Aankopen herstellen',
    version: 'App-versie',
    rtl: 'Rechts-naar-links-layout',
    tapSound: 'Tikgeluid',
    click: 'Klik',
    pop: 'Pop',
    freeThemeNote: 'Gratis: alleen Donker / Pro ontgrendelt Neon Pink & Cyber Blue',
    proThemeNote: 'Pro-thema\'s na paywall.',
    restoreDesc: 'Herstellen (binnenkort)',
    licenses: 'OSS-licenties (binnenkort)',
    openPro: 'Open DotChain Pro',
    heroPaywall: 'Upgrade naar de neonwereld',
    priceMonthly: '$2.99 / maand',
    onboardingTitle: 'Welkom bij DotChain',
    onboardingBody: 'Eén tik, sterke trilling. Bouw de keten van vandaag.',
    start: 'Start',
    paywallNote: 'Facturatie/ads later.',
  },
  sv: {
    ...baseEn,
    daysStreak: 'DAGAR I RAD',
    yourChain: 'DIN KEDJA',
    settings: 'Inställningar',
    hapticOff: 'Vibration av',
    language: 'Språk',
    sound: 'Ljud',
    haptics: 'Vibration',
    theme: 'Tema',
    restore: 'Återställ köp',
    version: 'App-version',
    rtl: 'Höger‑till‑vänster‑layout',
    tapSound: 'Tryckljud',
    click: 'Klick',
    pop: 'Pop',
    freeThemeNote: 'Gratis: bara Dark / Pro låser upp Neon Pink & Cyber Blue',
    proThemeNote: 'Pro-teman efter paywall.',
    restoreDesc: 'Återställ (snart)',
    licenses: 'OSS-licenser (snart)',
    openPro: 'Öppna DotChain Pro',
    heroPaywall: 'Uppgradera till neonvärlden',
    priceMonthly: '$2.99 / månad',
    onboardingTitle: 'Välkommen till DotChain',
    onboardingBody: 'Ett tryck, stark vibration. Bygg dagens kedja.',
    start: 'Starta',
    paywallNote: 'Fakturering/annonser senare.',
  },
};

export type Lang = keyof typeof dictionaries;

type I18nState = {
  lang: Lang;
  setLang: (lang: Lang) => void;
};

const useI18nStore = create<I18nState>((set) => ({
  lang: 'en',
  setLang: (lang) => set({ lang: lang in dictionaries ? lang : 'en' }),
}));

export function useTranslation() {
  const lang = useI18nStore((s) => s.lang);
  const setLang = useI18nStore((s) => s.setLang);
  const t = (key: keyof typeof baseEn) => dictionaries[lang][key] ?? key;
  return { t, lang, setLang };
}

export function setLang(lang: Lang) {
  useI18nStore.getState().setLang(lang);
}

export function getLang(): Lang {
  return useI18nStore.getState().lang;
}

export function tAll() {
  const lang = useI18nStore.getState().lang;
  return dictionaries[lang];
}

export function t(key: keyof typeof baseEn) {
  const lang = useI18nStore.getState().lang;
  return dictionaries[lang][key] ?? key;
}

export function applyRTL(enabled: boolean) {
  I18nManager.allowRTL(enabled);
  I18nManager.forceRTL(enabled);
}
